!function(t,a){"use strict";function n(){p=a.$body}function e(){v.iterate.call(H,h)}function o(){H=t($.base)}function i(t){var a="";a+='<div class="'+m.bar+'">',a+='<div class="'+m.track+'">',a+='<span class="'+m.handle+'"></span>',a+="</div></div>",t.paddingRight=parseInt(this.css("padding-right"),10),t.paddingBottom=parseInt(this.css("padding-bottom"),10),this.addClass([m.base,t.customClass,t.horizontal?m.horizontal:""].join(" ")).wrapInner('<div class="'+m.content+'" />').prepend(a),t.$content=this.find($.content),t.$bar=this.find($.bar),t.$track=this.find($.track),t.$handle=this.find($.handle),t.trackMargin=parseInt(t.trackMargin,10),t.$content.on(k.scroll,t,s),t.$track.fsTouch({axis:t.horizontal?"x":"y",pan:!0}).on(k.panStart,t,d).on(k.pan,t,c).on(k.panEnd,t,g),h(t),o()}function l(t){t.$track.fsTouch("destroy"),t.$bar.remove(),t.$content.off(k.namespace).contents().unwrap(),this.removeClass([m.base,m.active,t.customClass].join(" ")).off(k.namespace)}function r(a,n,e){var o=e||a.duration,i={};if("number"!==t.type(n)){var l=t(n);if(l.length>0){var r=l.position();n=a.horizontal?r.left+a.$content.scrollLeft():r.top+a.$content.scrollTop()}else n="top"===n?0:"bottom"===n?a.horizontal?a.$content[0].scrollWidth:a.$content[0].scrollHeight:a.$content.scrollTop()}i[a.horizontal?"scrollLeft":"scrollTop"]=n,a.$content.stop().animate(i,o)}function h(t){t.$el.addClass(m.isSetup);var a={},n={},e={},o=0,i=!0;if(t.horizontal){t.barHeight=t.$content[0].offsetHeight-t.$content[0].clientHeight,t.frameWidth=t.$content.outerWidth(),t.trackWidth=t.frameWidth-2*t.trackMargin,t.scrollWidth=t.$content[0].scrollWidth,t.ratio=t.trackWidth/t.scrollWidth,t.trackRatio=t.trackWidth/t.scrollWidth,t.handleWidth=t.handleSize>0?t.handleSize:t.trackWidth*t.trackRatio,t.scrollRatio=(t.scrollWidth-t.frameWidth)/(t.trackWidth-t.handleWidth),t.handleBounds={left:0,right:t.trackWidth-t.handleWidth},t.$content.css({paddingBottom:t.barHeight+t.paddingBottom});var l=t.$content.scrollLeft();o=l*t.ratio,i=t.scrollWidth<=t.frameWidth,a={width:t.frameWidth},n={width:t.trackWidth,marginLeft:t.trackMargin,marginRight:t.trackMargin},e={width:t.handleWidth}}else{t.barWidth=t.$content[0].offsetWidth-t.$content[0].clientWidth,t.frameHeight=t.$content.outerHeight(),t.trackHeight=t.frameHeight-2*t.trackMargin,t.scrollHeight=t.$content[0].scrollHeight,t.ratio=t.trackHeight/t.scrollHeight,t.trackRatio=t.trackHeight/t.scrollHeight,t.handleHeight=t.handleSize>0?t.handleSize:t.trackHeight*t.trackRatio,t.scrollRatio=(t.scrollHeight-t.frameHeight)/(t.trackHeight-t.handleHeight),t.handleBounds={top:0,bottom:t.trackHeight-t.handleHeight};var r=t.$content.scrollTop();o=r*t.ratio,i=t.scrollHeight<=t.frameHeight,a={height:t.frameHeight},n={height:t.trackHeight,marginBottom:t.trackMargin,marginTop:t.trackMargin},e={height:t.handleHeight}}i?t.$el.removeClass(m.active):t.$el.addClass(m.active),t.$bar.css(a),t.$track.css(n),t.$handle.css(e),t.panning=!1,f(t,o),s({data:t}),t.$el.removeClass(m.setup)}function s(t){v.killEvent(t);var a=t.data,n={};if(!a.panning){if(a.horizontal){var e=a.$content.scrollLeft();0>e&&(e=0),a.handleLeft=e/a.scrollRatio,a.handleLeft>a.handleBounds.right&&(a.handleLeft=a.handleBounds.right),n={left:a.handleLeft}}else{var o=a.$content.scrollTop();0>o&&(o=0),a.handleTop=o/a.scrollRatio,a.handleTop>a.handleBounds.bottom&&(a.handleTop=a.handleBounds.bottom),n={top:a.handleTop}}a.$handle.css(n)}}function d(t){var a,n=t.data,e=n.$track.offset();n.panning=!0,a=n.horizontal?n.handleLeft=t.pageX-e.left-n.handleWidth/2:n.handleTop=t.pageY-e.top-n.handleHeight/2,f(n,a)}function c(t){var a,n=t.data;a=n.horizontal?n.handleLeft+t.deltaX:n.handleTop+t.deltaY,f(n,a)}function g(t){var a=t.data;a.panning=!1,a.horizontal?a.handleLeft+=t.deltaX:a.handleTop+=t.deltaY}function f(t,a){var n={};t.horizontal?(a<t.handleBounds.left&&(a=t.handleBounds.left),a>t.handleBounds.right&&(a=t.handleBounds.right),n={left:a},t.$content.scrollLeft(Math.round(a*t.scrollRatio))):(a<t.handleBounds.top&&(a=t.handleBounds.top),a>t.handleBounds.bottom&&(a=t.handleBounds.bottom),n={top:a},t.$content.scrollTop(Math.round(a*t.scrollRatio))),t.$handle.css(n)}var p,u=a.Plugin("scrollbar",{widget:!0,defaults:{customClass:"",duration:0,handleSize:0,horizontal:!1,trackMargin:0},classes:["content","bar","track","handle","horizontal","setup","active"],methods:{_setup:n,_construct:i,_destruct:l,_resize:e,scroll:r,resize:h}}),$=u.classes,m=$.raw,k=u.events,v=u.functions,H=(a.$window,[])}(jQuery,Formstone);